<div><span style="font-family: 'Courier New'; ">พ.ศ. 2570 รัฐบาลได้ดำเนินโครงการก่อสร้างรถไฟใต้ดินซึ่งเป็นโครงการเมกะโปรเจกต์จนเสร็จสิ้น ทำให้กรุงเทพฯ กลายเป็นเมืองที่มีเครือข่ายรถไฟใต้ดินที่ใหญ่ที่สุดแห่งหนึ่งของโลก ประกอบด้วยเส้นทางรถไฟใต้ดินหลายร้อยสาย และสถานีอีกนับล้านสถานี<br />
<br />
คุณต้องการเดินทางโดยรถไฟใต้ดินจากสถานีหนึ่งไปยังอีกสถานีหนึ่ง โดยในระหว่างทาง สามารถทำการเปลี่ยนสายรถไฟได้โดยการไปลงที่บางสถานีแล้วขึ้นรถไฟใต้ดินสายอื่นที่ผ่านสถานีนั้นต่อ แต่การเปลี่ยนสายรถไฟแต่ละครั้งก็ทำให้เสียเวลาเป็นอย่างมาก คุณจึงต้องการเดินทางโดยเปลี่ยนสายรถไฟให้น้อยครั้งที่สุดเท่าที่จะทำได้<br />
<br />
<u><strong>งานของคุณ</strong></u><br />
จงเขียนโปรแกรมเพื่อตอบคำถามทั้งหมด Q คำถามว่า การเดินทางจากสถานี A<sub>i</sub> ไปยังสถานี B<sub>i</sub> จะต้องทำการเปลี่ยนสายรถไฟอย่างน้อยกี่ครั้ง<br />
<br />
</span><u><strong><span style="font-family: 'Courier New'; ">ข้อมูลนำเข้า</span></strong></u></div>
<div><span style="font-family: 'Courier New'; ">บรรทัดแรกระบุจำนวนเต็ม N และ M (2 &le; N &le; 1,000,000; 1 &le; M &le; 500) แทนจำนวนสถานีทั้งหมดและจำนวนสายของรถไฟใต้ดิน<br />
<br />
อีก M บรรทัดต่อมา ในบรรทัดที่ i+1 (1 &le; i &le; M) ระบุจำนวนเต็มตัวแรกคือ S<sub>i</sub> (2 &le; S<sub>i</sub> &le; 2,000) แทนจำนวนสถานีที่รถไฟใต้ดินสายที่ i ผ่าน และจำนวนเต็มอีก S<sub>i</sub> จำนวนถัดมา ระบุหมายเลขของสถานีที่รถไฟใต้ดินสายดังกล่าวผ่าน เรียงตามลำดับจากปลายทางข้างหนึ่งไปจนถึงปลายทางอีกข้างหนึ่ง<br />
<br />
บรรทัดถัดมา ระบุจำนวนเต็ม Q (2 &le; Q &le; 1,000,000) แทนจำนวนคำถามทั้งหมด<br />
<br />
อีก Q บรรทัดถัดมา ในบรรทัดที่ i+M+2 (1 &le; i &le; Q) ระบุจำนวนเต็ม A<sub>i</sub> และ B<sub>i</sub> (1 &le; A<sub>i</sub>,B<sub>i</sub> &le; N) แสดงถึงคำถามที่ i<br />
<br />
สถานีแต่ละสถานีจะมีรถไฟใต้ดินผ่านไม่เกิน 20 สาย โดยที่บางสถานีอาจไม่มีรถไฟใต้ดินผ่านเลยแม้แต่สายเดียวก็ได้ นอกจากนี้เส้นทางของรถไฟใต้ดินแต่ละสายอาจผ่านบางสถานีมากกว่าหนึ่งครั้งก็ได้<br />
<br />
<u><strong>ข้อมูลส่งออก</strong></u><br />
มีทั้งหมด Q บรรทัด ในบรรทัดที่ i (1 &le; i &le; Q) ให้พิมพ์จำนวนครั้งของการเปลี่ยนสายรถไฟที่น้อยที่สุดที่ต้องใช้ในการเดินทางจากสถานี A<sub>i</sub> ไปยังสถานี B<sub>i</sub> แต่ถ้าไม่สามารถเดินทางโดยรถไฟใต้ดินจากสถานี A<sub>i</sub> ไปยังสถานี B<sub>i</sub> ได้ ให้พิมพ์คำว่า impossible<br />
<br />
<div><u><strong>การให้คะแนน</strong></u><br />
50% ของข้อมูลทดสอบ จะมี N &le; 1,000; M &le; 100; Q &le; 1,000 และมี S<sub>i</sub> &le; 20 สำหรับทุกจำนวนเต็ม i (1 &le; i &le; M)<br />
<br />
<u><strong>ที่มา</strong></u><br />
การแข่งขัน IOI Thailand League เดือนกันยายน 2553<br />
โจทย์โดย: สุธี เรืองวิเศษ</div>
</span></div>
		<table>
			<tr>
				<th>ข้อมูลนำเข้า</th>
				<th>ข้อมูลส่งออก</th>
			</tr>	
		
			<tr>
				<td>6 2
<br />3 1 2 3
<br />3 2 4 5
<br />3
<br />1 3
<br />1 4
<br />2 6</td>
				<td>0
<br />1
<br />impossible</td>
			</tr>
			<tr>
				<td>15 5
<br />6 1 2 3 4 2 5
<br />2 6 7
<br />4 1 6 8 9
<br />4 10 11 12 13
<br />3 14 11 15
<br />6
<br />9 2
<br />10 13
<br />10 5
<br />3 7
<br />6 14
<br />15 12</td>
				<td>1
<br />0
<br />impossible
<br />2
<br />impossible
<br />1</td>
			</tr></table>
