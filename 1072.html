&nbsp;&nbsp;&nbsp; คุณ และนักโบราณคดีหลบระเบิดมาได้อย่างเฉียดฉิว ทำให้เทพเจ้าแห่งตัวเลขตกใจเป็นอย่างมาก อย่างไรก็ดีก่อนที่เทพเจ้าจะยอมรับว่าคุณและนักโบราณคดีไม่ใช่ผู้ตั้งใจลบ หลู่ เป็นเพียงแค่หมู่คนที่จริงๆ แล้วมีสัมมาคารวะ เพียงแต่ยังไม่รู้กาลเทศะดีเท่านั้น เทพเจ้าต้องการทดสอบคุณเป็นขั้นสุดท้าย<br />
<br />
&nbsp;&nbsp; &nbsp;เทพเจ้ากำหนดให้มีลำดับจำนวนเต็ม N จำนวน แทนด้วย a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,...,a<sub>N</sub> โดยที่ 0 &le; a<sub>i</sub> &le; 10<sup>9</sup> และกำหนดให้มีปฏิบัติการกับลำดับของตัวเลขนี้ 4 ประเภทดังนี้<br />
<ul>
    <li><u><strong>การเวียนวนตัวเลข (a)</strong></u> เมื่อกำหนดค่าจำนวนเต็มบวก x และ y มาให้ หน้าที่ของคุณคือการสลับค่าของ a<sub>x</sub> และ a<sub>y</sub> (ค่า x และ y อาจเท่ากันได้)</li>
    <li><u><strong>การจำแลงตัวเลข (b)</strong></u> เมื่อกำหนดจำนวนเต็มบวก x และ k หน้าที่ของคุณคือแทนค่า a<sub>x</sub> ใหม่ด้วยค่า k ที่รับเข้ามา</li>
    <li><u><strong>การปัดเป่าตัวเลข (c)</strong></u> เมื่อกำหนดจำนวนเต็มบวก x หน้าที่ของคุณคือแบ่งตัวเลขออกเป็นส่องกลุ่ม กลุ่มแรกคือตัวเลข x ตัวแรก และกลุ่มที่สองคือตัวเลข N - x ตัวที่เหลือ หลังจากนั้นให้เรียงตัวเลขทั้งสองกลุ่มจากหลังไปหน้าแล้วนำมาต่อกัน กล่าวคือ เปลี่ยนลำดับจาก&nbsp; a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,...,a<sub>N</sub>&nbsp; ให้เป็น a<sub>x</sub>,a<sub>x-1</sub>,a<sub>x-2</sub>,...,a<sub>2</sub>,a<sub>1</sub>,a<sub>n</sub>,a<sub>n-1</sub>,a<sub>n-2</sub>,...,a<sub>x+2</sub>,a<sub>x+1</sub></li>
    <li><strong><u>การออกดอกของตัวเลข (q)</u></strong> เมื่อกำหนดจำนวนเต็ม x หน้าที่ของคุณบอกเทพเจ้าว่า a<sub>x</sub> มีค่าเท่าใด</li>
</ul>
<strong>งานของคุณ</strong><br />
&nbsp;&nbsp;&nbsp; จงเขียนโปรแกรมรับลำดับตั้งต้นและรายการปฏิบัติการที่เทพเจ้าสั่งตามลำดับก่อนหลัง แล้วแสดงผลลัพธ์ตัวเลขของปฏิบัติการออกดอกของตัวเลข ออกมาตามลำดับในข้อมูลเข้า<br />
<br />
<strong>ข้อมูลนำเข้า</strong><br />
&nbsp;&nbsp;&nbsp; บรรทัดแรกมีจำนวนเต็ม N และ M (1 &le; N, M &le; 500,000) แสดงความยาวของลำดับตัวเลข และจำนวนปฏิบัติการตามลำดับ<br />
&nbsp;&nbsp;&nbsp; อีก N บรรทัดถัดมา มีข้อมูลของจำนวนเริ่มต้นในลำดับ&nbsp; โดยในบรรทัดที่ i + 1 ของข้อมูลนำเข้าจะมีจำนวนเต็มหนึ่งตัว แทนค่า ai<br />
&nbsp;&nbsp;&nbsp; อีก M บรรทัดถัดมา มีข้อมูลของปฏิบัติการที่เทพเจ้าสั่งให้คุณทำ โดยแต่ละบรรทัดจะมีรูปแบบหนึ่งในสี่แบบดังต่อไปนี้
<ul>
    <li>&ldquo;a x y&rdquo;&nbsp; โดย x, y คือจำนวนเต็มซึ่ง 1 &le; x, y &le; N หมายความว่าให้ทำการเวียนวนตัวเลขด้วยค่า x และ y ที่กำหนด</li>
    <li>&ldquo;b x k&rdquo;&nbsp; โดย x เป็นจำนวนเต็มซึ่ง 1 &le; x &le; N และ k เป็นจำนวนเต็มซึ่ง 0 &le; k &le; 109 หมายความว่าให้ทำการจำแลงตัวเลขด้วยค่า&nbsp; และ&nbsp; ที่กำหนด</li>
    <li>&ldquo;c x&rdquo;&nbsp; โดย x เป็นจำนวนเต็มซึ่ง 1 &le; x &le; N หมายความว่าใหทำการปัดเป่าตัวเลขด้วยค่า&nbsp; ที่กำหนด</li>
    <li>&ldquo;q x&rdquo; โดย x เป็นจำนวนเต็มซึ่ง 1 &le; x &le; N หมายความว่าให้ทำการออกดอกตัวเลขโดยใช้ค่า&nbsp; ที่กำหนด</li>
</ul>
<strong>ข้อมูลส่งออก</strong><br />
&nbsp;&nbsp;&nbsp; มี D บรรทัดเมื่อ D คือจำนวนการออกดอกตัวเลขในข้อมูลเข้า โดยในบรรทัดที่ i ให้พิมพ์คำตอบของการออกดอกตัวเลขครั้งที่ i ตามลำดับก่อนหลังในข้อมูลเข้า<br />
<br />
<strong>อธิบายตัวอย่างข้อมูลนำเข้า</strong><br />
<br />
<table cellspacing="1" cellpadding="1" border="1" style="width: 429px; height: 263px;">
    <tbody>
        <tr>
            <td style="text-align: center;">ข้อมูลนำเข้า</td>
            <td style="text-align: center;">ข้อมูลส่งออก</td>
            <td style="text-align: center;">คำอธิบาย</td>
        </tr>
        <tr>
            <td>5 6</td>
            <td>&nbsp;</td>
            <td>รับค่า N = 5,M = 6</td>
        </tr>
        <tr>
            <td>1</td>
            <td>&nbsp;</td>
            <td>กำหนดค่า a<sub>1</sub>&nbsp; = 1</td>
        </tr>
        <tr>
            <td>3</td>
            <td>&nbsp;</td>
            <td>กำหนดค่า a<sub>2</sub>&nbsp; = 3</td>
        </tr>
        <tr>
            <td>4</td>
            <td>&nbsp;</td>
            <td>กำหนดค่า a<sub>3</sub>&nbsp; = 4</td>
        </tr>
        <tr>
            <td>5</td>
            <td>&nbsp;</td>
            <td>กำหนดค่า a<sub>4</sub>&nbsp; = 5</td>
        </tr>
        <tr>
            <td>2</td>
            <td>&nbsp;</td>
            <td>กำหนดค่า a<sub>5</sub>&nbsp; = 2</td>
        </tr>
        <tr>
            <td>q 3</td>
            <td>4</td>
            <td>แสดงค่า a<sub>3</sub></td>
        </tr>
        <tr>
            <td>b 3 6</td>
            <td>&nbsp;</td>
            <td>ลำดับของจำนวนใหม่คือ 1 3 6 5 2</td>
        </tr>
        <tr>
            <td>a 2 4</td>
            <td>&nbsp;</td>
            <td>ลำดับของจำนวนใหม่คือ 1 5 6 3 2</td>
        </tr>
        <tr>
            <td>q 2</td>
            <td>5</td>
            <td>แสดงค่า a<sub>2</sub></td>
        </tr>
        <tr>
            <td>c 1</td>
            <td>&nbsp;</td>
            <td>ลำดับของจำนวนใหม่คือ 1 2 3 6 5</td>
        </tr>
        <tr>
            <td>q 4</td>
            <td>6</td>
            <td>แสดงค่า a<sub>4</sub></td>
        </tr>
    </tbody>
</table>
<br />
<div style="text-align: left;"><strong>การให้คะแนน</strong></div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 50% ของชุดข้อมูลทดสอบ มีค่า N &le; 5,000 และ M &le; 5,000 และในทุกชุดข้อมูลทดสอบมีค่า N &le; 500,000 และ M &le; 500,000<br />
<br />
<strong>ที่มา: </strong>การแข่งขัน YTOPC Challenge เมษายน 2552
		<table>
			<tr>
				<th>ข้อมูลนำเข้า</th>
				<th>ข้อมูลส่งออก</th>
			</tr>	
		
			<tr>
				<td>5 6<br />1<br />3<br />4<br />5<br />2<br />q 3<br />b 3 6<br />a 2 4<br />q 2<br />c 1<br />q 4</td>
				<td>4<br />5<br />6</td>
			</tr></table>